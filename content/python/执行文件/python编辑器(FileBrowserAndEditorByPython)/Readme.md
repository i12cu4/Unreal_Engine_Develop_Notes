# File Browser and Editor by python

一个功能强大的 Python 文件管理工具，提供可视化界面来浏览、编辑和运行 Python 脚本。

## 功能特性

- 📁 **智能文件浏览** - 按文件夹结构组织 Python 文件
- 🎯 **参数自动检测** - 自动识别 Python 文件中的全局变量作为运行参数
- 📝 **代码编辑** - 内置代码编辑器，支持实时编辑和保存
- 🚀 **一键运行** - 直接运行 Python 文件并查看输出
- 📊 **输出管理** - 完整的输出捕获和保存功能
- 🔄 **状态跟踪** - 记录每次运行的状态和参数

## 界面布局

```
+--------------------------------+-------------------------------+-------------------------------+
|          左侧面板              |           中间面板            |           右侧面板            |
|                                |                               |                               |
|  • 文件树状结构                |  • 文件信息                  |  • 代码编辑器                |
|  • 文件夹展开/折叠             |  • 运行参数配置              |  • 实时编辑                  |
|  • 快速文件访问               |  • 运行按钮                  |  • 保存功能                  |
|                                |  • 输出显示区域              |                               |
|                                |  • 输出文件保存              |                               |
+--------------------------------+-------------------------------+-------------------------------+
```

## 安装要求

- Python 3.6+
- 无需额外依赖（使用标准库）

## 快速开始

### 1. 准备文件结构

确保你的 Python 文件位于程序所在目录的 `Task` 文件夹中：

```
你的项目/
├── main.py           # 本程序（主文件）
└── Task/             # Python 文件存放目录
    ├── module1/
    │   ├── script1.py
    │   └── script2.py
    └── module2/
        └── script3.py
```

### 2. 运行程序

```bash
python main.py
```

### 3. 使用步骤

1. **选择文件**：在左侧文件树中点击要操作的 Python 文件
2. **配置参数**：在中间面板修改检测到的全局变量值
3. **编辑代码**：在右侧面板查看和编辑代码（可选）
4. **运行程序**：点击"运行程序"按钮执行脚本
5. **查看输出**：在输出区域查看运行结果

## 详细功能说明

### 文件浏览
- 自动扫描 `Task` 文件夹及其子文件夹
- 按文件夹层级显示文件结构
- 支持文件夹展开/折叠
- 显示文件相对路径和数量统计

### 参数检测
程序自动检测 Python 文件中的全局变量：
```python
# 示例：以下变量会被自动检测为运行参数
name = "张三"        # 字符串参数
age = 25            # 整数参数
is_student = True   # 布尔参数
score = 95.5        # 浮点数参数
```

### 代码编辑
- 语法高亮显示
- 实时编辑功能
- 一键保存到原文件
- 保存状态提示

### 运行功能
- 支持多次运行，每次运行都有独立记录
- 自动捕获标准输出和错误信息
- 显示运行参数和运行次数
- 支持参数类型自动转换

### 输出管理
- **清空输出**：清除当前输出内容
- **输出到文件**：将输出内容保存到指定文件
- 自动生成时间戳文件名避免冲突

## 使用示例

### 示例 Python 文件
```python
# example.py
name = "默认名称"
count = 10
debug_mode = True

def main():
    print(f"名称: {name}")
    print(f"计数: {count}")
    if debug_mode:
        print("调试模式已启用")

if __name__ == "__main__":
    main()
```

### 操作流程
1. 在左侧点击 `example.py`
2. 在中间面板修改参数：
   - `name`: "我的测试"
   - `count`: 5
   - `debug_mode`: ☑ 选中
3. 点击"运行程序"
4. 查看输出结果

## 注意事项

### 文件位置
- 程序固定扫描 `Task` 文件夹
- 确保 Python 文件都放在此文件夹中
- 支持子文件夹嵌套

### 参数检测限制
- 只检测函数定义之外的全局变量
- 复杂表达式可能无法正确解析
- 不支持检测类属性

### 运行环境
- 在当前 Python 环境中运行
- 使用 `exec()` 执行代码，注意安全性
- 确保代码兼容当前 Python 版本

## 故障排除

### 常见问题

**1. 找不到文件**
- 检查 `Task` 文件夹是否存在
- 确认 Python 文件扩展名为 `.py`

**2. 参数未显示**
- 确保变量定义在函数外部
- 检查变量赋值语句的语法

**3. 运行出错**
- 检查代码语法错误
- 确认依赖库已安装
- 查看错误输出信息

**4. 保存失败**
- 检查文件权限
- 确认文件未被其他程序占用

## 技术细节

### 实现原理
- **AST 解析**：分析 Python 代码结构，提取全局变量
- **Tkinter GUI**：使用 Python 标准库创建图形界面
- **动态执行**：通过 `exec()` 在全局作用域中运行代码

### 文件结构
```
main.py
└── PythonFileBrowser 类
    ├── __init__()      # 初始化界面和变量
    ├── create_panels() # 创建三栏布局
    ├── find_python_files() # 扫描Python文件
    ├── parse_python_file() # 解析代码提取参数
    ├── run_python_file()   # 运行Python文件
    └── 其他辅助方法
```

## 更新日志

### v1.0
- 基础文件浏览功能
- 参数自动检测和运行
- 代码编辑和保存
- 输出管理功能

## 许可证

MIT License

---

**提示**：建议在处理重要文件前先备份，避免意外修改导致代码丢失。